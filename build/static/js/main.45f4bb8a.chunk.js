(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{64:function(e,t,c){},65:function(e,t,c){},66:function(e,t,c){},79:function(e,t,c){},84:function(e,t,c){},85:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(28),o=c.n(s),r=(c(64),c(12)),i=c(34),j=c(10),d=(c(65),c(106)),l=c(100),u=(c(66),c(101)),b=c(102),h=c(103),m=c(31),O=m.a.initializeApp({apiKey:"AIzaSyCjxgX24RNaKs9aoaGl4QU32yMk_Bby9h0",authDomain:"spacieschat.firebaseapp.com",projectId:"spacieschat",storageBucket:"spacieschat.appspot.com",messagingSenderId:"621788177274",appId:"1:621788177274:web:585eb06d8cc338eba32cc3",measurementId:"G-Y9ZQ3YFLJ9"}).firestore(),p=m.a.auth(),v=new m.a.auth.GoogleAuthProvider,x=O,f=c(5),g=Object(a.createContext)(),_=function(e){var t=e.reducer,c=e.initialState,n=e.children;return Object(f.jsx)(g.Provider,{value:Object(a.useReducer)(t,c),children:n})},N=function(){return Object(a.useContext)(g)};var S=function(){var e,t,c=Object(a.useState)(""),n=Object(r.a)(c,2),s=(n[0],n[1]),o=Object(a.useState)(""),i=Object(r.a)(o,2),O=i[0],p=i[1],v=Object(j.f)().roomId,g=Object(a.useState)(""),_=Object(r.a)(g,2),S=_[0],y=_[1],w=Object(a.useState)([]),C=Object(r.a)(w,2),I=C[0],k=C[1],E=N(),B=Object(r.a)(E,2),D=B[0].user;B[1],Object(a.useEffect)((function(){return v&&(x.collection("rooms").doc(v).onSnapshot((function(e){y(e.data().name)})),x.collection("rooms").doc(v).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return k(e.docs.map((function(e){return e.data()})))}))),function(){}}),[v]),Object(a.useEffect)((function(){s(Math.floor(5e3*Math.random()))}),[]);var T=function(e){e.preventDefault(),x.collection("rooms").doc(v).collection("messages").add({message:O,name:D.displayName,timestamp:m.a.firestore.FieldValue.serverTimestamp()}),p("")};return Object(f.jsxs)("div",{className:"chat",children:[Object(f.jsxs)("div",{className:"chat__header",children:[Object(f.jsx)(d.a,{src:"https://avatars.dicebear.com/api/human/".concat(v,".svg")}),Object(f.jsxs)("div",{className:"chat__headerInfo",children:[Object(f.jsx)("h3",{children:S}),Object(f.jsxs)("p",{children:["Last seen at"," ",new Date(null===(e=I[I.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(f.jsx)("div",{className:"chat__headerRight",children:Object(f.jsx)(l.a,{children:Object(f.jsx)(u.a,{})})})]}),Object(f.jsx)("div",{className:"chat__body",children:I.map((function(e){var t;return Object(f.jsxs)("p",{className:"chat__message ".concat(e.name===D.displayName&&"chat__receiver"),children:[Object(f.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(f.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(f.jsxs)("div",{className:"chat__footer",children:[Object(f.jsx)(b.a,{}),Object(f.jsxs)("form",{children:[Object(f.jsx)("input",{type:"text",placeholder:"Type a message",value:O,onChange:function(e){return p(e.target.value)}}),Object(f.jsx)("button",{type:"submit",onClick:T,children:"Type a message"})]}),Object(f.jsx)(h.a,{type:"submit",onClick:T})]})]})},y=c(53),w=c(104),C=(c(79),c(54)),I=c.n(C),k=c(46),E="SET_USER",B=function(e,t){return console.log(t),t.type===E?Object(k.a)(Object(k.a)({},e),{},{user:t.user}):e};var D=function(){var e=N(),t=Object(r.a)(e,2);Object(y.a)(t[0]);var c=t[1];return Object(f.jsx)("div",{className:"login",children:Object(f.jsxs)("div",{className:"login__container",children:[Object(f.jsx)("div",{className:"login__text",children:Object(f.jsx)("h1",{children:"SPACIES"})}),Object(f.jsxs)(w.a,{onClick:function(){p.signInWithPopup(v).then((function(e){c({type:E,user:e.user})})).catch((function(e){return console.log("error",e)}))},children:[Object(f.jsx)(I.a,{className:"mailIconLogin"}),"SIGN IN"]})]})})},T=(c(84),c(105));c(85);var P=function(e){e.addNewChat;var t,c=e.id,n=e.name,s=Object(a.useState)(""),o=Object(r.a)(s,2),j=(o[0],o[1],Object(a.useState)("")),l=Object(r.a)(j,2),u=l[0],b=l[1];return Object(a.useEffect)((function(){c&&x.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return b(e.docs.map((function(e){return e.data()})))})),console.log(u)}),[c]),Object(f.jsx)(i.b,{to:"/rooms/".concat(c),children:Object(f.jsxs)("div",{className:"sidebarChat",children:[Object(f.jsx)(d.a,{src:"https://avatars.dicebear.com/api/human/".concat(c,".svg")}),Object(f.jsxs)("div",{className:"sidebarChat__info",children:[Object(f.jsx)("h2",{children:n}),Object(f.jsx)("p",{children:null===(t=u[0])||void 0===t?void 0:t.message})]})]})})};var R=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],n=t[1],s=N(),o=Object(r.a)(s,2),i=o[0].user;return o[1],Object(a.useEffect)((function(){var e=x.collection("rooms").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(f.jsxs)("div",{className:"sidebar",children:[Object(f.jsxs)("div",{className:"sidebar__header",children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{src:null===i||void 0===i?void 0:i.photoURL})}),Object(f.jsx)(l.a,{children:Object(f.jsx)(T.a,{onClick:function(){var e=prompt("Please enter name for your space room");e&&x.collection("rooms").add({name:e})}})})]}),Object(f.jsx)("div",{className:"sidebar__chats",children:c.map((function(e){return Object(f.jsx)(P,{id:e.id,name:e.data.name},e.id)}))})]})};var U=function(){var e=N(),t=Object(r.a)(e,2),c=t[0].user;return t[1],Object(f.jsx)("div",{className:"app",children:c?Object(f.jsx)("div",{className:"app__body",children:Object(f.jsxs)(i.a,{children:[Object(f.jsx)(R,{}),Object(f.jsxs)(j.c,{children:[Object(f.jsx)(j.a,{path:"/rooms/:roomId",children:Object(f.jsx)(S,{})}),Object(f.jsx)(j.a,{path:"/",children:Object(f.jsx)("div",{className:"app__body-emptyChat"})})]})]})}):Object(f.jsx)(D,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(_,{initialState:{user:null},reducer:B,children:Object(f.jsx)(U,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[86,1,2]]]);
//# sourceMappingURL=main.45f4bb8a.chunk.js.map